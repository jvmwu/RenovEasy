# 家庭装修接单App设计文档

## 概述

家庭装修接单App是一个基于地理位置的双端服务平台，采用现代化的移动端设计理念，为用户和装修工人提供高效的匹配服务。设计遵循iOS Human Interface Guidelines，确保优秀的用户体验。

## 架构设计

### 应用架构
```
┌─────────────────────────────────────┐
│           前端展示层                 │
├─────────────────────────────────────┤
│  用户端        │    装修工端         │
│  - 装修首页    │    - 地图首页       │
│  - 附近页面    │    - 订单页面       │
│  - 我的页面    │    - 我的页面       │
├─────────────────────────────────────┤
│           业务逻辑层                 │
│  - 订单管理    │    - 地图服务       │
│  - 用户管理    │    - 通知服务       │
│  - 评价系统    │    - 文件上传       │
├─────────────────────────────────────┤
│           数据访问层                 │
│  - 用户数据    │    - 订单数据       │
│  - 地理数据    │    - 媒体文件       │
└─────────────────────────────────────┘
```

### 技术栈
- **前端原型**: HTML5 + Tailwind CSS 4.1.11
- **地图服务**: Google Maps API
- **图标库**: FontAwesome
- **响应式设计**: iPhone 16 Pro适配
- **未来实现**: React Native 0.80.1

## 组件和界面设计

### 1. 用户端界面设计

#### 1.1 装修首页 (user-home.html)
**设计理念**: 以地图为核心的直观下单界面

**主要组件**:
- **地图容器**: 全屏Google Maps，支持定位和标记
- **位置搜索栏**: 顶部搜索框，支持地址自动补全
- **下单浮层**: 底部抽屉式表单
  - 装修类型选择器（网格布局）
  - 预算范围滑块
  - 描述输入框
  - 照片上传组件（3x3网格）
- **提交按钮**: 主色调CTA按钮

**交互流程**:
1. 地图加载 → 获取当前位置
2. 用户点击地图 → 显示标记和地址
3. 点击"发布需求" → 弹出下单表单
4. 填写信息 → 提交订单 → 成功反馈

#### 1.2 附近页面 (user-nearby.html)
**设计理念**: 卡片式装修工展示，突出信任度

**主要组件**:
- **筛选栏**: 距离、评分、价格筛选
- **装修工卡片**: 
  - 头像和基本信息
  - 星级评分显示
  - 距离和响应时间
  - 作品缩略图轮播
- **详情页**: 全屏模态框
  - 个人资质展示
  - 作品集网格
  - 评价列表
  - 收藏和联系按钮

#### 1.3 我的页面 (user-profile.html)
**设计理念**: 清晰的信息层级和便捷的功能入口

**主要组件**:
- **用户信息卡**: 头像、姓名、认证状态
- **订单管理**: 
  - 状态标签页（待接单/施工中/已完成）
  - 订单卡片列表
  - 进度跟踪组件
- **收藏列表**: 装修工快速访问
- **设置菜单**: 分组设置项

### 2. 装修工端界面设计

#### 2.1 地图首页 (worker-home.html)
**设计理念**: 高效的订单发现和接单工具

**主要组件**:
- **地图容器**: 订单标记（绿色/红色图标）
- **筛选面板**: 侧滑抽屉
  - 距离范围滑块
  - 预算区间选择
  - 装修类型筛选
- **订单详情卡**: 底部弹出
  - 订单基本信息
  - 用户需求描述
  - 现场照片轮播
  - 操作按钮组（详情/接单/导航）

#### 2.2 订单页面 (worker-orders.html)
**设计理念**: 清晰的订单状态管理和沟通界面

**主要组件**:
- **状态标签页**: 待开工/施工中/待验收/已完成
- **订单卡片**: 
  - 用户信息和联系方式
  - 施工地址和导航
  - 进度更新组件
- **沟通界面**: 聊天组件
- **进度上传**: 照片和文字说明

#### 2.3 我的页面 (worker-profile.html)
**设计理念**: 专业形象展示和数据统计

**主要组件**:
- **个人资质卡**: 认证信息和技能标签
- **收入统计**: 图表组件（日/周/月）
- **评价管理**: 评分统计和评价列表
- **作品集**: 可编辑的案例展示
- **账户设置**: 收款和通知配置

## 数据模型

### 用户模型
```json
{
  "userId": "string",
  "userType": "customer|worker",
  "profile": {
    "name": "string",
    "avatar": "string",
    "phone": "string",
    "email": "string",
    "location": {
      "latitude": "number",
      "longitude": "number",
      "address": "string"
    }
  },
  "verification": {
    "isVerified": "boolean",
    "documents": ["string"]
  }
}
```

### 订单模型
```json
{
  "orderId": "string",
  "customerId": "string",
  "workerId": "string|null",
  "status": "pending|accepted|in_progress|completed|cancelled",
  "location": {
    "latitude": "number",
    "longitude": "number",
    "address": "string"
  },
  "details": {
    "renovationType": "kitchen|bathroom|living_room|bedroom|full_house",
    "budget": "1-5w|5-10w|10-20w|20w+",
    "description": "string",
    "photos": ["string"]
  },
  "timeline": {
    "createdAt": "datetime",
    "acceptedAt": "datetime",
    "completedAt": "datetime"
  }
}
```

### 装修工资质模型
```json
{
  "workerId": "string",
  "qualifications": {
    "skills": ["string"],
    "experience": "number",
    "certificates": ["string"],
    "rating": "number",
    "completedJobs": "number"
  },
  "portfolio": [{
    "projectId": "string",
    "type": "string",
    "photos": ["string"],
    "description": "string",
    "completedAt": "datetime"
  }]
}
```

## 错误处理

### 用户体验错误处理
1. **网络错误**: 显示友好的重试界面
2. **定位失败**: 提供手动地址输入选项
3. **地图加载失败**: 降级到列表视图
4. **图片上传失败**: 显示上传进度和重试选项
5. **表单验证**: 实时验证和错误提示

### 技术错误处理
1. **API调用失败**: 自动重试机制
2. **数据同步错误**: 本地缓存和离线支持
3. **权限拒绝**: 引导用户到设置页面
4. **版本兼容**: 优雅降级处理

## 测试策略

### 原型测试
1. **响应式测试**: 多设备尺寸适配验证
2. **交互测试**: 所有按钮和表单功能验证
3. **地图集成测试**: Google Maps API功能验证
4. **视觉测试**: iOS设计规范符合性检查

### 用户体验测试
1. **可用性测试**: 核心流程完成时间和成功率
2. **无障碍测试**: 屏幕阅读器和键盘导航支持
3. **性能测试**: 页面加载时间和动画流畅度
4. **兼容性测试**: 不同浏览器和设备测试

## 设计系统

### 色彩规范
- **主色调**: #007AFF (iOS蓝)
- **成功色**: #34C759 (绿色，未接单状态)
- **警告色**: #FF3B30 (红色，已接单状态)
- **中性色**: #8E8E93 (灰色，次要信息)
- **背景色**: #F2F2F7 (浅灰，iOS背景)

### 字体规范
- **标题**: SF Pro Display, 粗体, 24-32px
- **副标题**: SF Pro Text, 中等, 18-20px
- **正文**: SF Pro Text, 常规, 16px
- **说明文字**: SF Pro Text, 常规, 14px

### 间距规范
- **页面边距**: 16px
- **组件间距**: 12px
- **内容间距**: 8px
- **按钮高度**: 44px (符合iOS触摸标准)

### 圆角规范
- **卡片圆角**: 12px
- **按钮圆角**: 8px
- **输入框圆角**: 8px
- **图片圆角**: 8px

## 动画和交互

### 页面转场
- **标签页切换**: 淡入淡出，300ms
- **模态框弹出**: 从底部滑入，400ms
- **抽屉展开**: 侧滑动画，300ms

### 微交互
- **按钮点击**: 缩放反馈，100ms
- **卡片悬停**: 阴影变化，200ms
- **加载状态**: 骨架屏和进度指示
- **成功反馈**: 绿色对勾动画

## 响应式设计

### iPhone 16 Pro适配
- **屏幕尺寸**: 393×852 points
- **安全区域**: 考虑刘海和底部指示器
- **圆角处理**: 39px圆角半径
- **状态栏**: 44px高度预留

### 横屏适配
- **地图界面**: 优化横屏地图显示
- **表单界面**: 调整布局避免键盘遮挡
- **列表界面**: 增加列数提高空间利用率